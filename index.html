<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Forex Toolkit</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background:#f8f9fa; }
    h1 { color: #2c3e50; }
    table { border-collapse: collapse; margin: auto; background:white; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    th, td { border:1px solid #ccc; padding:8px 12px; }
    th { background:#2c3e50; color:white; }
  </style>
</head>
<body>

  <h1>üìä Forex Toolkit App</h1>
  <p>Countdown until market opens:</p>
  <h2 id="countdown">Loading...</h2>

  <script>
    function updateCountdown() {
      const now = new Date();
      const utcDay = now.getUTCDay();
      const utcHour = now.getUTCHours();
      const utcMin = now.getUTCMinutes();

      let nextOpen = new Date(now);
      if (utcDay === 5 && utcHour >= 22 || utcDay === 6) {
        nextOpen.setUTCDate(now.getUTCDate() + ((1 + 7 - utcDay) % 7));
        nextOpen.setUTCHours(22,0,0,0);
      } else if (utcDay === 0 && utcHour < 22) {
        nextOpen.setUTCHours(22,0,0,0);
      } else {
        document.getElementById("countdown").innerText = "Market is OPEN ‚úÖ";
        return;
      }

      let diff = nextOpen - now;
      let hours = Math.floor(diff / (1000*60*60));
      let minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
      let seconds = Math.floor((diff % (1000*60)) / 1000);
      document.getElementById("countdown").innerText = hours+"h "+minutes+"m "+seconds+"s";
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();
  </script>

  <hr>
  <h2>üåç Forex Market Sessions</h2>
  <table>
    <tr><th>Session</th><th>Open (UTC)</th><th>Close (UTC)</th><th>Status</th></tr>
    <tr><td>Sydney</td><td>22:00</td><td>07:00</td><td id="sydney-status">Loading...</td></tr>
    <tr><td>Tokyo</td><td>00:00</td><td>09:00</td><td id="tokyo-status">Loading...</td></tr>
    <tr><td>London</td><td>08:00</td><td>17:00</td><td id="london-status">Loading...</td></tr>
    <tr><td>New York</td><td>13:00</td><td>22:00</td><td id="ny-status">Loading...</td></tr>
  </table>

  <script>
    function checkSession(open, close, nowHour) {
      if (open < close) {
        return (nowHour >= open && nowHour < close);
      } else {
        return (nowHour >= open || nowHour < close);
      }
    }
    function updateSessions() {
      const now = new Date();
      const hour = now.getUTCHours();
      document.getElementById("sydney-status").innerText = checkSession(22, 7, hour) ? "OPEN ‚úÖ" : "CLOSED ‚ùå";
      document.getElementById("tokyo-status").innerText = checkSession(0, 9, hour) ? "OPEN ‚úÖ" : "CLOSED ‚ùå";
      document.getElementById("london-status").innerText = checkSession(8, 17, hour) ? "OPEN ‚úÖ" : "CLOSED ‚ùå";
      document.getElementById("ny-status").innerText = checkSession(13, 22, hour) ? "OPEN ‚úÖ" : "CLOSED ‚ùå";
    }
    setInterval(updateSessions, 60000);
    updateSessions();
  </script>

  <hr>
  <h2>üìà Live Forex Chart (TradingView)</h2>
  <div class="tradingview-widget-container">
    <div id="tradingview_chart"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script type="text/javascript">
      new TradingView.widget({
        "width": "100%",
        "height": 400,
        "symbol": "OANDA:EURUSD",
        "interval": "60",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "hide_side_toolbar": false,
        "allow_symbol_change": true,
        "container_id": "tradingview_chart"
      });
    </script>
  </div>

</body>
</html>
